@model covid192020.Models.ViewModels.TreatmentViewModel
@using covid192020.Infrastructure
<tbody id="contr_preparats">
@if (Model.Preparats != null)
{
    int inc = 0;
    for (var i = 0; i < Model.Preparats.Count; i++)
    {
        <tr  class="input-preparats">
            @*@if (Model.Preparats[i].CancelDate == null)*@
            @{
                var canselDate = Model.Preparats[i].CancelDate != null ? ((DateTime)Model.Preparats[i].CancelDate).ToString("yyyy-MM-dd") : null;
                var positively = Model.Preparats[i].CancelDate == null ? "positively" : "negatively";
                <td style="border-right: 1px solid lightgrey">

                    <input asp-for="Preparats[inc].Id" id="id_number" value="@Model.Preparats[i].Id" type="hidden"/>
                    <input asp-for="Preparats[inc].CreateDate" value="@Model.Preparats[i].CreateDate.ToString("yyyy-MM-dd")" type="date" class="form-control hide-date-ico @positively" />
                </td>
                <td style="border-right: 1px solid lightgrey">
                    <input asp-for="Preparats[inc].Title" value="@Model.Preparats[i].Title" class="form-control @positively" style="max-width: 100%" />
                </td>
                <td >
                    <input asp-for="Preparats[inc].CancelDate" value="@canselDate" type="date" class="form-control hide-date-ico @positively" />
                </td>
                inc++;
            }
            @*else
            {
                <td>
                    <input disabled value="@Model.Preparats[i].Id" type="hidden" />
                    <input disabled value="@Model.Preparats[i].CreateDate.ToString("dd.MM.yyyy")" class="form-control hide-date-ico" style="max-width: 100%" />
                </td>
                <td>
                    <input disabled value="@Model.Preparats[i].Title" class="form-control" style="max-width: 100%" />
                </td>
                <td>
                    <input disabled value="@(((DateTime)(Model.Preparats[i].CancelDate)).ToString("dd.MM.yyyy"))" class="form-control hide-date-ico" style="max-width: 100%" />
                </td>
            }*@

            <td class='padding0'  style="border-right:0">
                <button type="button" onclick="RemoveElement(this, 'contr_preparats','input-preparats')" class="btn btn-danger">
                    <svg width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z" />
                    </svg>
                </button>
            </td>
        </tr>

    }
}
    @{Model.Preparats.Add(new covid192020.Models.ViewModels.PreparatViewModel());}
    <tr id="input-preparats" class="display-none">
        <td style="border-right: 1px solid lightgrey">
            <input asp-for="Preparats[Model.Preparats.Count-1].Id" id="id_number" disabled type="hidden" />
            <input asp-for="Preparats[Model.Preparats.Count-1].CreateDate" disabled value="" type="date" class="form-control hide-date-ico" />
        </td>
        <td style="border-right: 1px solid lightgrey">
            <input asp-for="Preparats[Model.Preparats.Count-1].Title" disabled class="form-control" style="max-width: 100%" />
        </td>
        <td >
            <input asp-for="Preparats[Model.Preparats.Count-1].CancelDate" disabled leavAloneDisabled type="date" value="" class="form-control hide-date-ico"  />
        </td>
        <td class='padding0' style="border-right:0">
            <button type="button" onclick="RemoveElement(this, 'contr_preparats','input-preparats')" class="btn btn-danger">
                <svg width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z" />
                </svg>
            </button>
        </td>
    </tr>
</tbody>